{"remainingRequest":"C:\\Users\\uid\\Desktop\\战网\\zw\\bfx\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\uid\\Desktop\\战网\\zw\\bfx\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\uid\\Desktop\\战网\\zw\\bfx\\vue_app_00\\src\\views\\Forum_detail.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\uid\\Desktop\\战网\\zw\\bfx\\vue_app_00\\src\\views\\Forum_detail.vue","mtime":1555032240304},{"path":"C:\\Users\\uid\\Desktop\\战网\\zw\\bfx\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\uid\\Desktop\\战网\\zw\\bfx\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"C:\\Users\\uid\\Desktop\\战网\\zw\\bfx\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Toast } from \"mint-ui\";\nimport '../assets/util.js';\nimport E from 'wangeditor';\nimport Qs from 'qs';\nexport default {\n  name: 'editor',\n  data: function data() {\n    return {\n      forum: [{\n        title: ''\n      }],\n      comments: [],\n      editorContent: '',\n      fid: this.$route.query.fid,\n      edi: '',\n      game: this.$route.query.game,\n      logo: ''\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    if (this.game == 1) {\n      this.logo = 'http://127.0.0.1:3000/img/xtb/ms.png';\n    } else if (this.game == 2) {\n      this.logo = 'http://127.0.0.1:3000/img/xtb/xj2.png';\n    } else if (this.game == 3) {\n      this.logo = 'http://127.0.0.1:3000/img/xtb/ah3.png';\n    } else if (this.game == 4) {\n      this.logo = 'http://127.0.0.1:3000/img/xtb/sw.png';\n    } else if (this.game == 5) {\n      this.logo = 'http://127.0.0.1:3000/img/xtb/ls.png';\n    } else if (this.game == 6) {\n      this.logo = 'http://127.0.0.1:3000/img/xtb/fb.png';\n    } else if (this.game == 7) {\n      this.logo = 'http://127.0.0.1:3000/img/xtb/ms3.png';\n    } else if (this.game == 8) {\n      this.logo = 'http://127.0.0.1:3000/img/xtb/xj.png';\n    }\n\n    window.scrollTo(0, 0);\n    this.axios.get(\"http://127.0.0.1:3000/post/getforumlist?fid=\".concat(this.fid)).then(function (res) {\n      var date = new Date(res.data[0].time * 1000);\n      res.data[0].time = date.format('yyyy-MM-dd hh:mm:ss');\n      _this.forum = res.data;\n      _this.fid = _this.forum[0].fid;\n    }), this.axios.get(\"http://127.0.0.1:3000/comment/getcomment?fid=\".concat(this.fid)).then(function (res) {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = res.data[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var item = _step.value;\n          var date = new Date(item.time * 1000);\n          item.time = date.format('yyyy-MM-dd hh:mm:ss');\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      _this.comments = res.data;\n    });\n  },\n  methods: {\n    clear: function clear() {\n      this.$emit('clear');\n    },\n    href: function href() {\n      this.$router.push(\"/forum_list?game=\".concat(this.$route.query.game, \"&type=\").concat(this.$route.query.type));\n    },\n    getContent: function getContent() {\n      var _this2 = this;\n\n      if (sessionStorage['user']) {\n        var content = this.editorContent;\n        console.log(this.editorContent);\n\n        if (content == '') {\n          Toast(\"评论内容不能为空\");\n          return;\n        }\n\n        var timestamp = parseInt(new Date().getTime() / 1000);\n        var param = {\n          fid: this.fid,\n          uname: sessionStorage['user'],\n          contant: content,\n          time: timestamp\n        };\n        this.axios.post(\"http://127.0.0.1:3000/comment/sendcomment\", Qs.stringify(param), {\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded'\n          }\n        }).then(function (res) {\n          var date = new Date(param.time * 1000);\n          param.time = date.format('yyyy-MM-dd hh:mm:ss');\n\n          _this2.comments.push(param);\n\n          $('.w-e-text').html('');\n        });\n      } else {\n        this.$router.push('/Login');\n      }\n    }\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n\n    var editor = new E('#editorElem');\n\n    editor.customConfig.onchange = function (html) {\n      _this3.editorContent = html;\n    };\n\n    editor.create();\n  }\n};",{"version":3,"sources":["Forum_detail.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div id=\"main\" @click='clear'>\r\n        <div id=\"contain\">\r\n            <table></table>\r\n            <h1><a href=\"#\" :style=\"'background-image:url('+logo+')'\"></a>{{forum[0].title}}</h1>\r\n            <div class=\"pgs\">\r\n                <a href=\"#hf\" class=\"button\">回复</a>\r\n                <a href=\"javascript:;\" class=\"button2\" @click='href'>返回列表</a>\r\n                <div class=\"clear\"></div>\r\n            </div>\r\n            <div class=\"host\">\r\n                <div class=\"head\">\r\n                    <img src=\"http://127.0.0.1:3000/user/1.jpg\" alt=\"\">\r\n                    <a href=\"#\">{{forum[0].uname}}</a>\r\n                </div>\r\n                <div class=\"middle\">\r\n                    <p>{{forum[0].contant}}</p>\r\n                </div>\r\n                <div class=\"foot\">\r\n                    <span>楼主</span>\r\n                    <p>{{forum[0].time}}</p>\r\n                </div>\r\n            </div>\r\n            <div class='clearF'></div>\r\n            <div class=\"floor\" v-for=\"(item,i) of comments\">\r\n                 <div class=\"head\">\r\n                     <img src=\"http://127.0.0.1:3000/user/1.jpg\" alt=\"\">\r\n                     <a href=\"#\">{{item.uname}}</a>\r\n                 </div>\r\n                 <div class=\"middle\">\r\n                     <p v-html='item.contant'></p>\r\n                 </div>\r\n                 <div class=\"foot\">\r\n                     <span>{{i+1}}</span>\r\n                     <sup>#</sup>\r\n                     <p>{{item.time}}</p>\r\n                 </div>\r\n            </div> \r\n            <div class=\"clear\"></div>\r\n            <div class=\"reply\" id='hf'>\r\n                <div class=\"reply_left\">\r\n                    <p>快速回复</p>\r\n                </div>\r\n                <div id=\"editorElem\"></div> \r\n                <div class=\"clear\"></div>\r\n                <a href=\"javascript:;\" class=\"button\" @click=\"getContent\">提交回复</a>\r\n            </div>  \r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport {Toast} from \"mint-ui\"\r\nimport '../assets/util.js'\r\nimport E from 'wangeditor'\r\nimport Qs from 'qs'\r\nexport default {\r\n    name: 'editor',\r\n    data(){\r\n       return{\r\n           forum:[{title:''}],\r\n           comments:[],    \r\n           editorContent: '',\r\n           fid:this.$route.query.fid,\r\n           edi:'',\r\n           game:this.$route.query.game,\r\n           logo:''\r\n       }\r\n    },\r\n    created(){\r\n        if(this.game==1){\r\n            this.logo='http://127.0.0.1:3000/img/xtb/ms.png'\r\n        }else if(this.game==2){\r\n            this.logo='http://127.0.0.1:3000/img/xtb/xj2.png'\r\n        }else if(this.game==3){\r\n            this.logo='http://127.0.0.1:3000/img/xtb/ah3.png'\r\n        }else if(this.game==4){\r\n            this.logo='http://127.0.0.1:3000/img/xtb/sw.png'\r\n        }else if(this.game==5){\r\n            this.logo='http://127.0.0.1:3000/img/xtb/ls.png'\r\n        }else if(this.game==6){\r\n            this.logo='http://127.0.0.1:3000/img/xtb/fb.png'\r\n        }else if(this.game==7){\r\n            this.logo='http://127.0.0.1:3000/img/xtb/ms3.png'\r\n        }else if(this.game==8){\r\n            this.logo='http://127.0.0.1:3000/img/xtb/xj.png'\r\n        }\r\n        window.scrollTo(0,0)\r\n        this.axios.get(`http://127.0.0.1:3000/post/getforumlist?fid=${this.fid}`)\r\n        .then(res=>{\r\n            let date=new Date(res.data[0].time*1000);\r\n            res.data[0].time=date.format('yyyy-MM-dd hh:mm:ss');\r\n            this.forum=res.data;\r\n            this.fid=this.forum[0].fid;\r\n        }),\r\n        this.axios.get(`http://127.0.0.1:3000/comment/getcomment?fid=${this.fid}`)\r\n        .then(res=>{\r\n            for(var item of res.data){\r\n                let date=new Date(item.time*1000);\r\n                item.time=date.format('yyyy-MM-dd hh:mm:ss');  \r\n            }\r\n            this.comments=res.data;\r\n        })\r\n    },\r\n    methods:{\r\n        clear(){\r\n            this.$emit('clear')\r\n        },\r\n        href(){\r\n            this.$router.push(`/forum_list?game=${this.$route.query.game}&type=${this.$route.query.type}`)\r\n        },\r\n        getContent: function () {\r\n            if(sessionStorage['user'] ){\r\n                \r\n                var content=this.editorContent\r\n                console.log(this.editorContent)\r\n                if(content==''){\r\n                    Toast(\"评论内容不能为空\");\r\n                    return\r\n                }\r\n                var timestamp = parseInt((new Date()).getTime()/1000); \r\n                var param={fid:this.fid,uname:sessionStorage['user'],contant:content,time:timestamp};\r\n                this.axios.post(`http://127.0.0.1:3000/comment/sendcomment`,Qs.stringify(param),\r\n                {headers: {'Content-Type': 'application/x-www-form-urlencoded'}\r\n                })\r\n                .then((res)=>{\r\n                    let date=new Date(param.time*1000)\r\n                    param.time=date.format('yyyy-MM-dd hh:mm:ss');  \r\n                    this.comments.push(param)\r\n                    $('.w-e-text').html('')\r\n                })\r\n            }else{\r\n                this.$router.push('/Login')\r\n            }\r\n        },\r\n    },\r\n    mounted() {\r\n        var editor = new E('#editorElem')\r\n        editor.customConfig.onchange = (html) => {\r\n          this.editorContent= html\r\n        }\r\n       editor.create()\r\n    },\r\n    \r\n\r\n\r\n}\r\n</script>\r\n<style scoped>\r\n    .clearF{\r\n        clear: both;\r\n    }\r\n      body{margin:0;padding:0;}\r\n      #nav{height:100px;width:100%;}\r\n      a{text-decoration: none;}\r\n\r\n      #main{\r\n          width:100%;\r\n          background:url('http://127.0.0.1:3000/img/sc_bg.jpg') no-repeat fixed;\r\n          background-position: center -200px;\r\n      }\r\n      #contain{\r\n          margin:0 40px 0 60px;max-width: 1600px;\r\n      }\r\n      #contain>h1{\r\n          color:#fff;\r\n          height:50px;\r\n          line-height: 50px;\r\n          text-align:left;\r\n          font-size:30px;\r\n          font-weight: 500;\r\n          margin:50px 0 30px 0;\r\n      }\r\n      #contain>h1>a{\r\n          width:50px;\r\n          height:50px;\r\n          display:block;\r\n          float:left;\r\n          margin-right:10px;\r\n          background-image:url('http://127.0.0.1:3000/img/logo-sc2.png');\r\n          background-repeat:no-repeat;\r\n          background-size: 50px;\r\n      }\r\n      #contain .button{\r\n          display:block;\r\n          width:140px;\r\n          height:36px;\r\n          background:#ffc729;\r\n          color:#000;\r\n          text-align: center;\r\n          line-height: 36px;\r\n          font-size: 16px;\r\n          font-weight:800;\r\n      }\r\n     a.button{float:left;} \r\n     .clear{\r\n         clear:both;\r\n     }\r\n     .pgs{\r\n         margin-bottom:26px;\r\n     }\r\n     .thead{\r\n         width:100%;\r\n         height:60px;\r\n         background:rgba(0,0,0,0.2);\r\n         margin-top:25px;\r\n         border-top:1px solid rgba(255,255,255,0.2);\r\n         border-bottom:1px solid rgba(255,255,255,0.2);\r\n     }\r\n     .thead>div,.forum_list>li>div{float:left;color:rgba(255,255,255,0.7);padding:0;}\r\n     .forum_list{\r\n         list-style: none;\r\n         padding:0;\r\n         margin:0;\r\n     }\r\n     .forum_list>li{\r\n         width:100%;\r\n         height:60px;\r\n         border-bottom:1px solid rgba(255,255,255,0.2);\r\n        \r\n     }\r\n     .title{\r\n         width:800px;\r\n         height:60px;\r\n         line-height:60px;\r\n        \r\n         }\r\n      .thead .title{\r\n          width:750px;\r\n          padding-left:50px;\r\n      }\r\n     .author{\r\n         width:150px;\r\n         height:60px;\r\n         line-height: 60px;\r\n     }\r\n     .reply,.watch{\r\n         width:80px;\r\n         height:60px;\r\n         line-height: 60px;\r\n     }\r\n     .last{\r\n         width:300px;\r\n         height:60px;\r\n         line-height: 60px;\r\n         float:right;\r\n         text-align: right;\r\n     }\r\n     .title>img{\r\n       margin-left:25px;\r\n       vertical-align: text-bottom;\r\n       margin-right:15px;\r\n     }\r\n     .button2{\r\n         display:block;\r\n         width:80px;\r\n         height:24px;\r\n         line-height: 24px;\r\n         color:rgba(255,255,255,.5);\r\n         background:rgba(255,255,255,.1);\r\n         text-align:center;\r\n         font-size:0.9rem;\r\n         float:right;\r\n         transition:all 0.5s;\r\n     }\r\n     .button2:hover{\r\n         background:rgba(255,255,255,.3);\r\n         color:rgba(255,255,255,.8)\r\n     }\r\n     .floor{\r\n         width:100%;\r\n         min-height:150px;\r\n         border-top:1px solid rgba(255,255,255,.2);\r\n         border-bottom:1px solid rgba(255,255,255,.2);\r\n     }\r\n     .head{\r\n         height:110px;\r\n         width:240px;\r\n         float:left;\r\n         padding:25px 0 0 0;\r\n     }\r\n     .head>img{\r\n         height:78px;\r\n         width:78px;\r\n         border:1px solid #000;\r\n         vertical-align: top;\r\n         float:left;\r\n     }\r\n     .head>a{\r\n         color:rgba(255,255,255,.5);\r\n         margin-left:13px;\r\n         float:left;\r\n     }\r\n     .middle{\r\n         width:940px;\r\n         height:150px;\r\n         float:left;\r\n         padding:25px 0 0 25px;\r\n     }\r\n     .middle>p{\r\n         margin:0;\r\n         color:rgba(255,255,255,.9);\r\n         line-height:1.8rem;\r\n         text-align:left;\r\n     }\r\n     .foot{\r\n         color:rgba(255,255,255,.8);\r\n         width:138px;\r\n         height:150px;\r\n         float:right;\r\n     }\r\n     .foot>span{\r\n         margin-left:100px;\r\n     }\r\n     .foot>p{\r\n         font-size:.8rem;\r\n         margin-top:0;\r\n     }\r\n     .reply{\r\n         width:100%;\r\n         height:480px;\r\n         background:rgba(255,255,255,.05);\r\n     }\r\n     .reply_left{\r\n         margin-top:40px;\r\n         width:20%;\r\n         float:left;\r\n         color:#fff;\r\n     }\r\n     .reply_left>img{\r\n         width:78px;\r\n         height:78px;\r\n         vertical-align:text-top;\r\n     }\r\n     .reply_left>p{\r\n         font-size:1.5rem;\r\n         font-weight:bold;\r\n     }\r\n     .reply_left>span{\r\n        font-size:0.9rem;\r\n        margin-left:5px;\r\n     }\r\n     #editorElem{\r\n         margin-top:50px;\r\n         text-align:left;\r\n         color:#fff;\r\n         width:75%;\r\n         float:right;\r\n         margin-right:20px;\r\n     }\r\n     .reply>a{\r\n         margin-left:331px;\r\n         margin-top:12px;\r\n     }\r\n</style>"],"sourceRoot":"src\\views"}]}